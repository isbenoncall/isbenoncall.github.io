<html>
  <head>
    <link href='http://fonts.googleapis.com/css?family=Cousine' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/momentjs/2.9.0/moment.min.js"></script>
    
    <style>
      body { font-family: 'Cousine'; }
      h1 { text-align: center; font-size: 10em; margin: 40px; }
      table { margin: 0px auto; font-size: 2em; }
      table td { padding: 20px; }
      .calendar { text-align: center; }
      .month { padding: 10px; }
      .inactive { color: #bbb; }
      .today { padding: 15px; border: 5px solid #f00; }
      .legend { border: 5px solid #000; width: 1em; }
      .call  { background-color: #0ff; }
      .post  { background-color: #ff0; }
      .wedge { background-color: #0fc; }
    </style>
    <script type="text/javascript">
      $(document).ready(function() {
        var sched = 'cpowwopccpowcpowcpowcpowcpowcpow';
        
        var stateStr = {'c':'<i class="fa fa-user-md"></i> Yes.', 'p':'<i class="fa fa-bed"></i> Post.', 'o':'<i class="fa fa-home"></i> No.', 'w':'<i class="fa fa-briefcase"></i> Wedge.'};
        var classStr = {'c':'call', 'p':'post', 'o':'off', 'w':'wedge' };
        
        var now = moment();
        var temp = now.clone();
        $('.state').html(stateStr[sched.charAt(now.date()-1)]);
        $('.calendar .month').html(now.format('MMMM YYYY'));
        var startWeek = temp.startOf('month').week();
        var endWeek   = temp.endOf('month').week();
        for (var w = startWeek; w <= endWeek; w++) {
          var weekHTML = [];
          for (var d = 0; d < 7; d++) {
            temp.week(w).day(d);
            var dayClass = [];
            if (now.isSame(temp,'month')) {
              dayClass.push(classStr[sched.charAt(temp.date()-1)]);
              if (now.isSame(temp,'day')) {
                dayClass.push('today');
              }
            } else {
              dayClass.push('inactive');
            }
            weekHTML.push('<td class="'+dayClass.join(' ')+'">'+temp.format('D')+'</td>');
          }
          $('.calendar tbody').append('<tr>'+weekHTML.join('')+'</tr>');
        }
      });
    </script>
  </head>
  
  <body>
    <h1 class="state"> Maybe? </h1>
    <table class="calendar">
      <thead>
        <tr><th colspan="7" class="month">Loading...</th></tr>
        <tr>
          <th>Su</th>
          <th>Mo</th>
          <th>Tu</th>
          <th>We</th>
          <th>Th</th>
          <th>Fr</th>
          <th>Sa</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
    <table>
      <tr>
        <td class="call  legend"></td><td> Call  </td>
        <td class="post  legend"></td><td> Post  </td>
      </tr>
      <tr>
        <td class="wedge legend"></td><td> Wedge </td>
        <td class="off   legend"></td><td> Off   </td>
      </tr>
    </table>
  </body>
</html>
